<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>स्वतन्त्र आवाज - Shwotantraa Aawaj</title>
<style>
  body {
    background-color: #f7f7f7;
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    padding: 0;
  }
  .container {
    max-width: 600px;
    margin: 40px auto 60px auto;
    background: #e6e6e6;
    padding: 25px 30px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    border-radius: 10px;
  }
  .logo {
    text-align: center;
    margin-bottom: 15px;
  }
  .logo img {
    max-width: 100px;
    height: auto;
  }
  h1 {
    text-align: center;
    color: #333333;
    margin-bottom: 10px;
  }
  p.subtitle {
    text-align: center;
    color: #666666;
    font-size: 16px;
    margin-bottom: 25px;
  }
  label {
    display: block;
    margin-top: 15px;
    font-weight: 600;
    color: #333;
  }
  input, textarea, select {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    border: 1px solid #cccccc;
    border-radius: 5px;
    font-size: 14px;
    box-sizing: border-box;
  }
  textarea {
    height: 100px;
    resize: vertical;
  }
  input[type="file"] {
    padding: 5px;
  }
  button {
    margin-top: 20px;
    width: 100%;
    padding: 12px;
    background-color: #007b5e;
    color: white;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  button:hover {
    background-color: #005f46;
  }
  .thank-you {
    display: none;
    text-align: center;
    margin-top: 20px;
    color: green;
    font-weight: bold;
  }
  .footer {
    max-width: 600px;
    margin: 0 auto 40px auto;
    padding: 10px 30px;
    font-size: 14px;
    color: #444;
    text-align: center;
  }
  .footer a {
    color: #007b5e;
    text-decoration: none;
    font-weight: 600;
  }
  .footer a:hover {
    text-decoration: underline;
  }
  #previewContainer {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
  }
  .preview-item {
    position: relative;
    width: 160px;
    height: 240px;
    border: 1px solid #ccc;
    border-radius: 6px;
    overflow: hidden;
  }
  .preview-item img,
  .preview-item video {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }
  .remove-btn {
    position: absolute;
    top: 4px;
    right: 4px;
    background: rgba(255, 0, 0, 0.8);
    border: none;
    color: white;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    cursor: pointer;
    font-weight: bold;
    line-height: 22px;
    text-align: center;
  }
</style>
</head>
<body>
<div class="container">
  <div class="logo">
    <img src="https://i.postimg.cc/XYdVp1GM/Shwotantra-Aawaj.png" alt="स्वतन्त्र आवाज Logo" />
  </div>
  <h1>स्वतन्त्र आवाज</h1>
  <p class="subtitle">आफ्नो आवाज उठाउनुहोस् — आफ्नो चिन्ता पेश गर्नुहोस्</p>

  <form id="issueForm" enctype="multipart/form-data">
    <label for="name">Full Name</label>
    <input type="text" id="name" name="name" required />

    <label for="address">Address (Village, Municipality, Ward no)</label>
    <input type="text" id="address" name="address" required />

    <label for="district">District</label>
    <input type="text" id="district" name="district" required />

    <label for="contact">Contact Number (Tel/Mob)</label>
    <input type="tel" id="contact" name="contact" required />

    <label for="email">Email Address</label>
    <input type="email" id="email" name="email" />

    <label for="comments">Comments / Issues</label>
    <textarea id="comments" name="comments" required></textarea>

    <label for="fileUpload">Attach Files (Photos, Videos, Documents)</label>
    <input
      type="file"
      id="fileUpload"
      name="fileUpload"
      accept="image/*,video/*,.pdf,.doc,.docx,.txt"
      multiple
    />
    <div id="previewContainer"></div>

    <button type="submit">Submit</button>
  </form>

  <div class="thank-you" id="thankYouMessage">
    धन्यवाद! तपाईंको सन्देश प्राप्त भयो।
  </div>
</div>

<div class="footer">
  <p>Visit our Facebook page: <a href="https://www.facebook.com/shwotantraaawaj" target="_blank" rel="noopener noreferrer">स्वतन्त्र आवाज </a></p>
  <p>Contact Us: <a href="mailto:shwotantraaawaj@gmail.com">shwotantraaawaj@gmail.com</a></p>
</div>

<script>
  const fileInput = document.getElementById('fileUpload');
  const previewContainer = document.getElementById('previewContainer');

  // Keep track of files separately because input.files is read-only
  let filesArray = [];

  fileInput.addEventListener('change', function(e) {
    // Add new files to filesArray
    for (const file of e.target.files) {
      // Prevent duplicates by name + size (optional)
      if (!filesArray.some(f => f.name === file.name && f.size === file.size)) {
        filesArray.push(file);
      }
    }
    updatePreview();
    // Clear input to allow re-upload same file if removed
    fileInput.value = '';
  });

  function updatePreview() {
    previewContainer.innerHTML = '';

    const validImageTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
    const validVideoTypes = ['video/mp4', 'video/webm', 'video/ogg'];

    filesArray.forEach((file, index) => {
      const fileType = file.type;
      const url = URL.createObjectURL(file);

      const previewItem = document.createElement('div');
      previewItem.classList.add('preview-item');

      if (validImageTypes.includes(fileType)) {
        const img = document.createElement('img');
        img.src = url;
        img.alt = file.name;
        previewItem.appendChild(img);
      } else if (validVideoTypes.includes(fileType)) {
        const video = document.createElement('video');
        video.src = url;
        video.controls = true;
        previewItem.appendChild(video);
      } else {
        // Show icon or text for other file types
        const icon = document.createElement('div');
        icon.style = 'padding: 10px; text-align: center; font-size: 14px; color: #333;';
        icon.textContent = file.name;
        previewItem.appendChild(icon);
      }

      // Remove button
      const removeBtn = document.createElement('button');
      removeBtn.classList.add('remove-btn');
      removeBtn.textContent = '×';
      removeBtn.title = 'Remove this file';
      removeBtn.addEventListener('click', () => {
        filesArray.splice(index, 1);
        updatePreview();
      });

      previewItem.appendChild(removeBtn);
      previewContainer.appendChild(previewItem);
    });
  }

  // On submit, you can access filesArray to get the selected files
  document.getElementById('issueForm').addEventListener('submit', function(e) {
    e.preventDefault();
    // For now, just show thank you and hide form
    this.style.display = 'none';
    document.getElementById('thankYouMessage').style.display = 'block';

    // If you want to send filesArray somewhere, that needs backend or JS upload code
  });
</script>
</body>
</html>
